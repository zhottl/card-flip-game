<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹´ë“œ ë’¤ì§‘ê¸° ê²Œì„</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Vercel í™˜ê²½ ë³€ìˆ˜ ì£¼ì… (ë¹Œë“œ ì‹œ build.jsê°€ ì´ ë¶€ë¶„ì„ êµì²´í•©ë‹ˆë‹¤) -->
    <script>
        // ê¸°ë³¸ê°’: ë¡œì»¬ ê°œë°œìš© ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ê°€ ì£¼ì…ë˜ì§€ ì•Šì€ ê²½ìš°
        if (typeof window.SUPABASE_URL === 'undefined') {
            window.SUPABASE_URL = '';
        }
        if (typeof window.SUPABASE_ANON_KEY === 'undefined') {
            window.SUPABASE_ANON_KEY = '';
        }
    </script>
    <!-- Supabase ì„¤ì • (ì¸ë¼ì¸ìœ¼ë¡œ í¬í•¨) -->
    <script>
        // Supabase ì„¤ì •
        // Vercel í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” ë¡œì»¬ ì„¤ì • íŒŒì¼ì—ì„œ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤
        (function() {
            // window ê°ì²´ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸° (ë¹Œë“œ ì‹œ ì£¼ì…ë¨)
            const envUrl = typeof window !== 'undefined' ? window.SUPABASE_URL : '';
            const envKey = typeof window !== 'undefined' ? window.SUPABASE_ANON_KEY : '';
            
            // ê¸°ë³¸ê°’ (ë¡œì»¬ ê°œë°œìš©)
            const defaultUrl = 'https://jtmsuvpqxphytjurqase.supabase.co';
            const defaultKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0bXN1dnBxeHBoeXRqdXJxYXNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2NjI3MzYsImV4cCI6MjA4MTIzODczNn0.A75RfWTkmjVQUofBAcR18eYccduYSl8ROV4Cx2kgTNA';
            
            const SUPABASE_CONFIG = {
                url: envUrl || defaultUrl,
                anonKey: envKey || defaultKey
            };
            
            // ë””ë²„ê¹… ì •ë³´ (í”„ë¡œë•ì…˜ì—ì„œëŠ” ì œê±° ê°€ëŠ¥)
            console.log('ğŸ”§ Supabase ì„¤ì •:', {
                url: SUPABASE_CONFIG.url ? 'âœ… ì„¤ì •ë¨' : 'âŒ ì—†ìŒ',
                key: SUPABASE_CONFIG.anonKey ? 'âœ… ì„¤ì •ë¨' : 'âŒ ì—†ìŒ',
                source: envUrl ? 'í™˜ê²½ ë³€ìˆ˜' : 'ê¸°ë³¸ê°’'
            });
            
            // Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
            if (typeof supabase !== 'undefined') {
                window.supabaseClient = supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.anonKey);
                console.log('âœ… Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ');
            } else {
                console.error('âŒ Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        })();
    </script>
</head>
<body>
    <!-- ì´ë¦„ ì…ë ¥ ëª¨ë‹¬ -->
    <div id="name-modal" class="modal hidden">
        <div class="modal-content">
            <h2>ì ìˆ˜ ì €ì¥</h2>
            <p>ì ìˆ˜ë¥¼ ì €ì¥í•  ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
            <input type="text" id="player-name-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="20" autofocus>
            <button id="save-score-btn" class="btn">ì ìˆ˜ ì €ì¥</button>
        </div>
    </div>
    
    <div class="container">
        <h1>ğŸ® ì¹´ë“œ ë’¤ì§‘ê¸° ê²Œì„</h1>
        
        <div class="game-info">
            <div class="info-item">
                <span class="label">í”Œë ˆì´ì–´:</span>
                <span id="player-name-display">-</span>
            </div>
            <div class="info-item">
                <span class="label">ì´ë™ íšŸìˆ˜:</span>
                <span id="moves">0</span>
            </div>
            <div class="info-item">
                <span class="label">ì‹œê°„:</span>
                <span id="timer">0</span>ì´ˆ
            </div>
            <button id="reset-btn" class="btn">ìƒˆ ê²Œì„</button>
        </div>
        
        <div id="game-board" class="game-board"></div>
        
        <div id="win-message" class="win-message hidden">
            <h2>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
            <p>ëª¨ë“  ì¹´ë“œë¥¼ ë§ì·„ìŠµë‹ˆë‹¤!</p>
            <button id="save-score-btn-win" class="btn" style="margin-top: 15px;">ì ìˆ˜ ì €ì¥í•˜ê¸°</button>
        </div>
        
        <button id="leaderboard-btn" class="btn btn-secondary">ë¦¬ë”ë³´ë“œ ë³´ê¸°</button>
        
        <div id="leaderboard" class="leaderboard hidden"></div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
